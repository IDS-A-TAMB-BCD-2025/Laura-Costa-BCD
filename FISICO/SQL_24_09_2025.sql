CREATE DATABASE IF NOT EXISTS BD_ALUGUEL_PRODUTOS;
USE BD_ALUGUEL_PRODUTOS;

CREATE TABLE IF NOT EXISTS CLIENTE(
	CLIENTE_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    EMAIL VARCHAR(255) NOT NULL,
    CPF VARCHAR(14)NOT NULL,
    NOME VARCHAR(255),
    TELEFONE VARCHAR(255) NOT NULL
);

CREATE TABLE IF NOT EXISTS PRODUTO(
	PRODUTO_ID INTEGER  AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(255) NOT NULL,
    DESCRICAO VARCHAR(500) NOT NULL,
    PRECO DECIMAL NOT NULL,
    QTD_DISPONIVEL INTEGER NOT NULL
);

CREATE TABLE IF NOT EXISTS ALUGUEL(
	ALUGUEL_ID INTEGER AUTO_INCREMENT PRIMARY KEY,
    DATA_ALUGUEL DATE NOT NULL,
    DATA_DEVOLUCAO DATE NOT NULL,
    VALOR_TOTAL DECIMAL NOT NULL,
    FK_CLIENTE_ID INTEGER NOT NULL,
    FK_PRODUTO_ID INTEGER NOT NULL,
    FOREIGN KEY(FK_CLIENTE_ID) REFERENCES CLIENTE(CLIENTE_ID) ON DELETE CASCADE,
    FOREIGN KEY(FK_PRODUTO_ID) REFERENCES PRODUTO(PRODUTO_ID) ON DELETE CASCADE
);

-- DML - LINGUAGEM DE MANIPULAÇÃO 
-- INSERT - INSERIR
INSERT INTO CLIENTE (EMAIL,TELEFONE,CPF,NOME)
VALUES ("email@email.com","1999999999","123456789","Leo");

INSERT INTO CLIENTE (EMAIL,TELEFONE,CPF,NOME)
VALUES("ubaldolaura722gmail.com","19996472319","45476729895","Laura");

INSERT INTO CLIENTE(NOME,EMAIL,TELEFONE, CPF)
VALUES("gabriel","gabriel@email.com","1989898989","22222222222");

-- SELECT - SELECIONAR
SELECT * FROM CLIENTE;

-- INSERT - PRODUTOS
INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("MacBook M","Notbook Apple","4789.90",5);

-- SELECT - SELECIONAR
SELECT * FROM PRODUTO;

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES ("Iphone","Iphone 17 Pro","1199",20);

INSERT INTO PRODUTO (NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES("Apple Watch","Apple Watch Series 11","9222",50);

INSERT INTO PRODUTO(NOME,DESCIRCAO,PRECO,QTD_DISPONIVEL)
VALUES ("iPad","iPad Pro","2439.90","50");

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES("AirPods","AirPods 4","3967.99",40);

INSERT INTO PRODUTO(NOME,DESCRICAO,PRECO,QTD_DISPONIVEL)
VALUES("Apple Iphone","Apple Iphone 13","5983.99",60);

-- INSERT ALUGUEIS
SELECT * FROM CLIENTE;
SELECT * FROM PRODUTO;

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-09-24","2025-10-01",7890,3,2);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-08-10","2025-08-20",8654,1,6);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-05-24","2025-06-01",4530,3,2);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-10-27","2025-11-01",7390,2,2);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-02-22","2025-03-02",8690,3,5);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-09-24","2025-10-06",8390,2,2);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-07-23","2025-08-05",3480,3,2);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-02-22","2025-03-01",2220,1,5);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-06-24","2025-07-03","7590",1,4);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-02-25","2025-03-02",4390,2,6);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-02-22","2025-08-01",7320,1,2);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-08-21","2025-09-05",9990,2,4);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-03-24","2025-04-03",3720,3,2);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-10-26","2025-11-01",3620,2,6);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-03-26","2025-04-26",7890,3,4);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-04-04","2025-04-12",8880,1,3);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-02-03","2025-02-03",6590,2,5);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-07-24","2025-08-15",10000,3,2);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-12-24","2025-12-31",3220,1,5);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-09-27","2025-10-11",7890,3,7);

INSERT INTO ALUGUEL( DATA_ALUGUEL,DATA_DEVOLUCAO, VALOR_TOTAL, FK_CLIENTE_ID, FK_PRODUTO_ID)
VALUES ("2025-09-27","2025-10-30",2390,2,4);

SELECT * FROM ALUGUEL;
SELECT * FROM PRODUTO;

-- ATUALIZAR UM REGISTRO (UPDATE)
UPDATE PRODUTO 
SET PRECO = 3500
WHERE  PRODUTO_ID = 1;

UPDATE PRODUTO 
SET PRECO = 3502
WHERE  PRODUTO_ID = 2;

UPDATE PRODUTO 
SET PRECO = 4680
WHERE  PRODUTO_ID = 3;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 10
WHERE  PRODUTO_ID = 1;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 20
WHERE  PRODUTO_ID = 2;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 30
WHERE  PRODUTO_ID = 3;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 60
WHERE  PRODUTO_ID = 4;

UPDATE PRODUTO
SET QTD_DISPONIVEL = 80
WHERE  PRODUTO_ID = 5;

SELECT * FROM PRODUTO;

UPDATE CLIENTE
SET EMAIL = "gabrielzinho@email.com"
WHERE CLIENTE_ID= 1;

UPDATE CLIENTE
SET EMAIL = "laura@gmail.com"
WHERE  CLIENTE_ID= 2;

SELECT * FROM CLIENTE;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-01-02"
WHERE  ALUGUEL_ID = 1;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-01-02"
WHERE  ALUGUEL_ID = 2;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-01-02"
WHERE  ALUGUEL_ID = 3;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-01-02"
WHERE  ALUGUEL_ID = 4;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-01-02"
WHERE  ALUGUEL_ID = 5;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-01-02"
WHERE  ALUGUEL_ID = 6;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-01-02"
WHERE  ALUGUEL_ID = 7;

UPDATE ALUGUEL
SET DATA_DEVOLUCAO = "2026-01-02"
WHERE  ALUGUEL_ID = 8;

SELECT * FROM ALUGUEL;

-- APAGAR UM REGISTRO (DELETE)
DELETE FROM CLIENTE
 WHERE CLIENTE_ID = 1;
 
DELETE FROM PRODUTO 
WHERE PRODUTO_ID = 4;

DELETE FROM ALUGUEL 
WHERE ALUGUEL_ID = 3;

SELECT * FROM CLIENTE
WHERE CLIENTE_ID = 2;

SELECT * FROM PRODUTO;

SELECT * FROM ALUGUEL;

SELECT NOME, PRECO
FROM PRODUTO
WHERE PRODUTO_ID = 3;







    